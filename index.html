<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Signal Lab</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root {
    --apple-ease: cubic-bezier(0.32, 0.72, 0, 1);
    --apple-spring: cubic-bezier(0.16, 1, 0.3, 1);
    --text-main: #1d1d1f;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
    color: var(--text-main);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #fff;
    overflow-x: hidden;
}

/* ğŸŒŠ èƒŒæ™¯æµåŠ¨ */
.mesh-bg {
    position: fixed;
    inset: 0;
    z-index: -1;
    background:
        radial-gradient(circle at 15% 50%, #fec5e5, transparent 25%),
        radial-gradient(circle at 85% 30%, #c2e9fb, transparent 25%),
        radial-gradient(circle at 50% 50%, #e0d4fc, transparent 50%),
        radial-gradient(circle at 50% 90%, #fdfcdc, transparent 50%);
    background-size: 200% 200%;
    animation: fluid 6s ease-in-out infinite alternate;
}
@keyframes fluid {
    from { background-position: 0% 50%; }
    to { background-position: 100% 50%; }
}

/* é¡¶éƒ¨ */
.navbar {
    width: 100%;
    text-align: center;
    padding: 20px 0;
}
.status-dot {
    width: 8px;
    height: 8px;
    background: #34c759;
    border-radius: 50%;
    box-shadow: 0 0 8px #34c759;
}
.count-text {
    font-size: 12px;
    color: rgba(0,0,0,.5);
}

/* å®¹å™¨ */
.container {
    width: 90%;
    max-width: 390px;
    padding-bottom: 40px;
}

/* ğŸ æ¶²æ€ç»ç’ƒå¡ç‰‡ */
.card {
    position: relative;
    background: linear-gradient(135deg, rgba(255,255,255,.6), rgba(255,255,255,.3));
    backdrop-filter: blur(30px) saturate(180%);
    border-radius: 28px;
    padding: 24px;
    margin-bottom: 22px;
    box-shadow:
        inset 0 1px 1px rgba(255,255,255,.9),
        0 20px 40px rgba(0,0,0,.12);
    border: 1px solid rgba(255,255,255,.35);
}

/* è¡¨å• */
.form-input,.form-select {
    width: 100%;
    padding: 15px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,.4);
    background: rgba(255,255,255,.4);
    margin-bottom: 12px;
    font-size: 15px;
}

/* ğŸ Apple æŒ‰é’® */
.btn {
    width: 100%;
    padding: 16px;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,.4);
    background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.3));
    backdrop-filter: blur(20px);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    box-shadow:
        inset 0 1px 1px rgba(255,255,255,.9),
        0 10px 25px rgba(0,0,0,.15);
}
.btn-submit {
    background: rgba(29,29,31,.9);
    color: #fff;
}

/* ğŸ ç›²ç›’åŠ¨ç”» */
.apple-float {
    animation: appleFloat 1.2s var(--apple-spring) infinite;
}
@keyframes appleFloat {
    0%,100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-12px) scale(1.05); }
}
.apple-pop {
    animation: applePop .55s var(--apple-ease) forwards;
}
@keyframes applePop {
    0% { transform: scale(.9); opacity: 0; filter: blur(6px); }
    60% { transform: scale(1.05); opacity: 1; filter: blur(0); }
    100% { transform: scale(1); }
}

/* ğŸ¬ ç›²ç›’å±‚ */
.blind-box-container {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.6);
    backdrop-filter: blur(15px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
}
.mystery-box { font-size: 96px; }

/* ğŸ§­ é¦–æ¬¡å¼•å¯¼ */
.intro-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.35);
    backdrop-filter: blur(20px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}
.intro-card {
    width: 86%;
    max-width: 340px;
    padding: 28px;
    border-radius: 30px;
    background: linear-gradient(135deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
    text-align: center;
    box-shadow: 0 30px 80px rgba(0,0,0,.25);
}
.intro-feature {
    display: flex;
    gap: 12px;
    margin-bottom: 14px;
    text-align: left;
}
</style>
</head>

<body>

<div class="mesh-bg"></div>

<!-- ğŸ§­ å¼•å¯¼é¡µ -->
<div id="introOverlay" class="intro-overlay">
  <div class="intro-card apple-pop">
    <h2>æ¬¢è¿æ¥åˆ° Signal Lab</h2>
    <p style="color:#666">æ•æ‰ä¸ä½ åŒé¢‘çš„ä¿¡å·</p>

    <div class="intro-feature"><span>ğŸ“¡</span><div><strong>åŒ¿åå‘å°„</strong><p>æ— éœ€ç¤¾äº¤å‹åŠ›</p></div></div>
    <div class="intro-feature"><span>ğŸ</span><div><strong>æ¯æ—¥ä¸€æ¬¡æ•æ‰</strong><p>ç›¸é‡æ›´çè´µ</p></div></div>
    <div class="intro-feature"><span>ğŸ”’</span><div><strong>ä»…åŒ¹é…å¯è§</strong><p>å®‰å…¨å¯æ§</p></div></div>

    <button class="btn btn-submit" onclick="closeIntro()">å¼€å§‹ä½¿ç”¨</button>
  </div>
</div>

<div class="navbar">
    <div style="display:flex;gap:6px;justify-content:center;align-items:center">
        <div class="status-dot"></div>
        <strong>Signal Lab</strong>
    </div>
    <div class="count-text">å·²è¿æ¥ <span id="totalCount">...</span> ä¸ªåŒé¢‘ä¿¡å·</div>
</div>

<div class="container">
    <div class="card">
        <input id="nickname" class="form-input" placeholder="ä»£å· / æ˜µç§°">
        <select id="gender" class="form-select">
            <option value="ç”·">æˆ‘æ˜¯ç”·ç”Ÿ</option>
            <option value="å¥³">æˆ‘æ˜¯å¥³ç”Ÿ</option>
        </select>
        <input id="age" class="form-input" placeholder="å¹´é¾„">
        <input id="city" class="form-input" placeholder="åŸå¸‚">
        <input id="contact" class="form-input" placeholder="å¾®ä¿¡å·">
        <button class="btn btn-submit" onclick="submitCard()">å‘å°„ä¿¡å·</button>
    </div>

    <div class="card">
        <button class="btn" onclick="drawCard('ç”·')">æ•æ‰ç”·ç”Ÿ</button>
        <button class="btn" onclick="drawCard('å¥³')">æ•æ‰å¥³ç”Ÿ</button>
    </div>
</div>

<div id="blindBoxAnim" class="blind-box-container">
    <div id="mysteryBox" class="mystery-box">ğŸ</div>
</div>

<script src="app.js"></script>
</body>
</html>
