<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¿¡å·å®éªŒå®¤ - æ•æ‰ä½ çš„åŒé¢‘ä¿¡å·</title>
    <style>
        :root {
            --primary: #8a2be2;
            --accent: #ff00ff;
            --bg: #0f0c29;
            --glass: rgba(255, 255, 255, 0.1);
        }
        body {
            margin: 0; padding: 0;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            font-family: 'PingFang SC', -apple-system, sans-serif;
            color: #fff;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
        }
        .navbar {
            width: 100%; padding: 20px 0; text-align: center;
            background: var(--glass); backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 100;
        }
        .navbar h1 { margin: 0; font-size: 20px; letter-spacing: 2px; }
        .count-text { font-size: 12px; opacity: 0.8; margin-top: 5px; }
        .container { width: 92%; max-width: 450px; margin-top: 20px; padding-bottom: 50px; }
        
        /* ç»ç’ƒæ‹Ÿæ€å¡ç‰‡ */
        .card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .card-header { font-size: 18px; font-weight: bold; margin-bottom: 20px; display: flex; align-items: center; }
        .card-header span { margin-right: 10px; }

        /* è¡¨å•æ ·å¼ */
        .form-input, .form-select {
            width: 100%; padding: 14px; margin-bottom: 15px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px; color: #fff; font-size: 15px; outline: none;
            box-sizing: border-box;
        }
        .form-label { display: block; margin-bottom: 8px; font-size: 13px; opacity: 0.7; }

        /* æ ‡ç­¾é€‰æ‹©å™¨ - å¯¹åº”ä½ å›¾ç‰‡é‡Œçš„å†…å®¹ */
        .tag-container { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
        .tag-item {
            padding: 6px 14px; border-radius: 20px; font-size: 12px;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            cursor: pointer; transition: 0.3s;
        }
        .tag-item.active { background: var(--primary); border-color: var(--accent); transform: scale(1.05); }

        /* æŒ‰é’® */
        .btn {
            width: 100%; padding: 16px; border: none; border-radius: 15px;
            font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .btn-submit { background: linear-gradient(90deg, #8a2be2, #ff00ff); color: #fff; }
        .btn-draw-male { background: #4facfe; color: #fff; margin-bottom: 15px; }
        .btn-draw-female { background: #fa709a; color: #fff; }
        .btn:disabled { opacity: 0.5; }

        /* ç»“æœå±•ç¤º */
        .result-box {
            display: none; text-align: center; margin-top: 20px;
            padding: 20px; border-radius: 20px; background: rgba(255,255,255,0.15);
            animation: fadeIn 0.5s ease forwards;
        }
        .res-mbti { background: #ff00ff; padding: 2px 8px; border-radius: 5px; font-size: 12px; margin-left: 10px; }
        .res-contact {
            margin-top: 15px; padding: 15px; background: #fff; color: #000;
            border-radius: 12px; font-weight: bold; cursor: pointer;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="navbar">
    <h1>ğŸ§© ä¿¡å·å®éªŒå®¤</h1>
    <p class="count-text">å·²æ•è· <span id="totalCount" style="color:#00f2fe">...</span> ä¸ªé¢‘ç‡ä¿¡å·</p>
</div>

<div class="container">
    <!-- æ¨¡å—ä¸€ï¼šå½•å…¥é¢‘ç‡ -->
    <div class="card">
        <div class="card-header"><span>ğŸ“¡</span> å‘å°„ä½ çš„ä¿¡å·</div>
        <input type="text" id="nickname" class="form-input" placeholder="ä»£å· (æ˜µç§°)">
        <div style="display: flex; gap: 10px;">
            <select id="gender" class="form-select" style="flex:1">
                <option value="ç”·">ç”·ç”Ÿ ğŸ‘¦</option>
                <option value="å¥³">å¥³ç”Ÿ ğŸ‘§</option>
            </select>
            <input type="number" id="age" class="form-input" style="flex:1" placeholder="å¹´é¾„">
        </div>
        <input type="text" id="city" class="form-input" placeholder="åæ ‡åŸå¸‚">
        <select id="mbti" class="form-select">
            <option value="">é€‰æ‹©ä½ çš„ MBTI äººæ ¼</option>
            <option value="INFP">INFP è°ƒåœè€…</option><option value="ENFP">ENFP ç«é€‰è€…</option>
            <option value="INFJ">INFJ æå€¡è€…</option><option value="ENFJ">ENFJ ä¸»äººå…¬</option>
            <option value="INTJ">INTJ å»ºç­‘å¸ˆ</option><option value="ENTJ">ENTJ æŒ‡æŒ¥å®˜</option>
            <option value="INTP">INTP é€»è¾‘å­¦å®¶</option><option value="ENTP">ENTP è¾©è®ºå®¶</option>
            <option value="ISFP">ISFP è‰ºæœ¯å®¶</option><option value="ESFP">ESFP è¡¨æ¼”è€…</option>
            <option value="ISTP">ISTP é‰´èµå®¶</option><option value="ESTP">ESTP ä¼ä¸šå®¶</option>
            <option value="ISFJ">ISFJ å®ˆå«è€…</option><option value="ESFJ">ESFJ æ‰§æ”¿å®˜</option>
            <option value="ISTJ">ISTJ ç‰©æµå¸ˆ</option><option value="ESTJ">ESTJ æ€»ç®¡</option>
        </select>
        
        <label class="form-label">ä¸ªæ€§æ ‡ç­¾ (å¤šé€‰)</label>
        <div class="tag-container" id="tagPicker">
            <!-- å¯¹åº”å›¾ç‰‡æ ‡ç­¾ -->
            <div class="tag-item">ç¤¾ç‰›</div><div class="tag-item">ç¤¾æ</div>
            <div class="tag-item">æ¸¸æˆå¤§ä½¬</div><div class="tag-item">çº¯çˆ±æˆ˜ç¥</div>
            <div class="tag-item">æ‹çˆ±è„‘</div><div class="tag-item">ç†¬å¤œå† å†›</div>
            <div class="tag-item">ç©¿æ­è¾¾äºº</div><div class="tag-item">æç¬‘å¥³/ç”·</div>
            <div class="tag-item">å¥èº«è¾¾äºº</div><div class="tag-item">ç½‘ç˜¾å°‘å¹´</div>
        </div>

        <input type="text" id="contact" class="form-input" placeholder="è”ç³»æ–¹å¼ (å¾®ä¿¡/QQ)">
        <button class="btn btn-submit" onclick="submitCard()">è¿›å…¥ä¿¡å·æ± </button>
    </div>

    <!-- æ¨¡å—äºŒï¼šæ•æ‰ä¿¡å· -->
    <div class="card">
        <div class="card-header"><span>ğŸ”</span> æ•æ‰åŒé¢‘ä¿¡å·</div>
        <button class="btn btn-draw-male" onclick="drawCard('ç”·')">æ•æ‰ç”·ç”Ÿä¿¡å· ğŸ‘¦</button>
        <button class="btn btn-draw-female" onclick="drawCard('å¥³')">æ•æ‰å¥³ç”Ÿä¿¡å· ğŸ‘§</button>

        <div id="resultArea" class="result-box">
            <div style="font-size: 40px;" id="resIcon">ğŸ›¸</div>
            <div style="font-size: 20px; font-weight: bold; margin: 10px 0;">
                <span id="resNick">ä»£å·</span>
                <span id="resMbti" class="res-mbti">MBTI</span>
            </div>
            <div id="resInfo" style="font-size: 14px; opacity: 0.8; margin-bottom: 10px;">--å² | --</div>
            <div id="resTags" class="tag-container" style="justify-content: center;"></div>
            <div class="res-contact" id="resContact" onclick="copyContact()">ç‚¹å‡»å¤åˆ¶å¾®ä¿¡å·</div>
        </div>
    </div>
</div>

<!-- æ¢æˆå›½å†…æ›´å¿«çš„æºï¼Œå¹¶åŠ ä¸Š defer ç¡®ä¿åŠ è½½é¡ºåº -->
<script src="https://cdn.bootcdn.net/ajax/libs/supabase/2.39.7/supabase-js.js"></script>
<script>
    // å¢åŠ ä¸€ä¸ªç®€å•çš„æ£€æŸ¥ï¼Œå¦‚æœåº“æ²¡åŠ è½½æˆåŠŸå°±æŠ¥é”™æé†’
    window.onload = function() {
        if (typeof supabase === 'undefined') {
            alert('Supabase åº“åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–æ›´æ¢ CDN æº');
        }
    }
</script>
<script src="app.js"></script>

</body>
</html>
